@using ViewModel.Video.User
@model VideoAllViewModel
@{
    Layout = "_Layout";
}
<style>
    .text-truncate {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .layout-ls {
        display: flex;
        height: 100vh;
        color: white;
        font-family: sans-serif;
    }

    /* Sidebar trái */
    .sidebar-ls {
        z-index: 9999;
        width: 240px;
        border-right: 1px solid #1e293b;
        padding: 20px 10px;
    }

    /* Nội dung chính */
    .main-ls {
        flex: 1;
        padding: 20px;
    }

    .title-ls {
        font-size: 20px;
        margin-bottom: 20px;
    }

    .map-img-ls {
        max-width: 100%;
        height: auto;
    }

    /* Panel phải */
    .right-ls {
        width: 280px;
        border-left: 1px solid #1e293b;
        padding: 20px;
    }

    .panel-ls {
        border-radius: 12px;
        padding: 15px;
    }

    .card {
        border-radius: var(--radius);
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        transition: transform 0.2s;
    }

        .card:hover {
            transform: translateY(-5px);
        }

    .card-img-top {
        border-top-left-radius: var(--radius);
        border-top-right-radius: var(--radius);
        height: 200px;
        object-fit: cover;
    }

  /*   .pagination .page-item .page-link {
        padding: 8px 16px;
        transition: all 0.3s ease;
        border-radius: 0 !important;
    }

    .pagination .page-item.active .page-link {
        background-color: #0d6efd !important;
        color: white !important;
    }

    .pagination .page-item .page-link:hover:not(.active) {
        background-color: #e9ecef;
    }
 */
</style>
@{
    var leftSide = Model.LeftSlide;
    var search = Model.Search;
}
<div style="width: 100%; height: 100vh; margin: 0; padding: 0;">
    <div class="col-12 d-flex justify-content-center align-items-center mb-4">
        <div class="col-md-6">
            <form method="get" asp-action="Index">
                <div class="input-group">
                    <input type="text" name="search" class="form-control" value="@search.Search" placeholder="Tìm kiếm video..." />
                    <button type="submit" class="btn btn-success">
                        <i class="fas fa-search"></i> Tìm
                    </button>
                </div>
            </form>
        </div>
    </div>
    <section class="categories p-3 mb-5" style="padding: 0; margin: 0;">
        <section class="categories py-5">
            <div class="container">
                <h2 class="text-center mb-4"></h2>
                <div class="row g-4">
                    @foreach (var video in Model.Video)
                    {
                        <div class="col-md-4">
                            <a asp-controller="Video" asp-action="Detail" asp-route-id="@video.Id" class="text-decoration-none">
                                <div class="card h-100">

                                    <img src="@(video.Thumbnail != null ? video.Thumbnail : "/img/flashcard.png")" class="card-img-top" alt="@video.Title">
                                    <div class="card-body">
                                        <h5 class="card-title">@video.Title</h5>    
                                        <p class="card-text text-truncate" style="max-width: 200px;">
                                        </p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    }
                </div>
            </div>
        </section>

        @if (search.TotalPages > 1)
        {
            <nav aria-label="Page navigation">
                <ul class="pagination pagination-rounded justify-content-center shadow-sm rounded-pill overflow-hidden">
                    <li class="page-item  @(search.CurrentPage == 1 ? "disabled" : "")">
                        <a class="page-link bg-light text-success border-0" asp-action="Index" asp-route-search="@search.Search" asp-route-page="@(search.CurrentPage - 1)">«</a>
                    </li>

                    @for (int i = 1; i <= search.TotalPages; i++)
                    {
                        <li class="page-item @(search.CurrentPage == i ? "active" : "")">
                            <a class="page-link  @(search.CurrentPage == i ? "text-white bg-success border-0" : "text-success bg-white border-0")"
                               asp-action="Index" asp-route-search="@search.Search" asp-route-page="@i">@i</a>
                        </li>
                    }

                    <li class="page-item @(search.CurrentPage == search.TotalPages ? "disabled" : "")">
                        <a class="page-link bg-light text-success border-0" asp-action="Index" asp-route-search="@search.Search" asp-route-page="@(search.CurrentPage + 1)">»</a>
                    </li>
                </ul>
            </nav>
        }


    </section>
</div>


<input type="hidden" id="region" value="@leftSide.region" />
<input type="hidden" id="sidebar" value="@leftSide.sidebar" />
<input type="hidden" id="navbar" value="@leftSide.navbar" />
<input type="hidden" id="learn" value="nav-learn-tab" />
<input type="hidden" id="historical" value="nav-historylocal-tab" />
<input type="hidden" id="course" value="nav-course-tab" />
@section Scripts {
    <script>
        $(document).ready(function () {
            let region = document.getElementById('region').value;
            let sidebar = document.getElementById('sidebar').value;
            let navbar = document.getElementById('navbar').value;
            let historical = document.getElementById('historical').value;
            let learn = document.getElementById('learn').value;
            let course = document.getElementById('course').value;

          $('.sidebar-item-ls[name="'+sidebar+'"]').addClass('active-ls');
          $('.nav-link[id="'+navbar+'"]').addClass('active');
          $('.nav-link[id="'+historical+'"]').attr('href', '/Region/'+region);
          $('.nav-link[id="'+learn+'"]').attr('href', '/Learn/'+region);
          $('.nav-link[id="'+course+'"]').attr('href', '/Course/'+region);
         });
    </script>
}
